# ğŸ§ª Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚¬ã‚¤ãƒ‰

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€runoteãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•**
```bash
cd /home/syuhei0519/work/runote/frontend
```

### 2. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
npm install
```

ã“ã‚Œã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ï¼š
- `@vue/test-utils` - Vue ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- `vitest` - ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼
- `happy-dom` - DOMç’°å¢ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- `@testing-library/jest-dom` - DOM assertion ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

## ğŸƒâ€â™‚ï¸ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

### **åŸºæœ¬çš„ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**

```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆä¸€å›ã ã‘ï¼‰
npm run test:run

# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ï¼‰
npm run test

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ†ã‚¹ãƒˆ
npm run test ConfirmDialog.spec.ts
npm run test ToastNotification.spec.ts

# ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã§ãƒ†ã‚¹ãƒˆ
npm run test components
```

### **è©³ç´°ã‚ªãƒ—ã‚·ãƒ§ãƒ³**

```bash
# UIä»˜ãã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤ºï¼‰
npm run test:ui

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:coverage

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®ã¿å®Ÿè¡Œ
npm run test -- --grep "æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°"

# ä¸¦åˆ—å®Ÿè¡Œã‚’ç„¡åŠ¹åŒ–ï¼ˆãƒ‡ãƒãƒƒã‚°æ™‚ï¼‰
npm run test -- --no-threads

# è©³ç´°ãªå‡ºåŠ›
npm run test -- --reporter=verbose
```

## ğŸ“Š å®Ÿè£…æ¸ˆã¿ãƒ†ã‚¹ãƒˆ

### **ConfirmDialog ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
- âœ… æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
- âœ… show=falseã®æ™‚ã¯è¡¨ç¤ºã•ã‚Œãªã„
- âœ… ç¢ºèªãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«confirmã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«
- âœ… ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«cancelã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«
- âœ… ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã§ã¯æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹

### **ToastNotification ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**
- âœ… æˆåŠŸã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… è­¦å‘Šã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… æƒ…å ±ã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«closeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«
- âœ… show=falseã®æ™‚ã¯è¡¨ç¤ºã•ã‚Œãªã„
- âœ… ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹
- âœ… descriptionãŒç©ºã®å ´åˆã¯è¡¨ç¤ºã•ã‚Œãªã„

## ğŸ¯ ãƒ†ã‚¹ãƒˆçµæœã®è¦‹æ–¹

### **æˆåŠŸæ™‚ã®å‡ºåŠ›ä¾‹**
```
âœ“ src/components/__tests__/ConfirmDialog.spec.ts (6)
  âœ“ æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
  âœ“ show=falseã®æ™‚ã¯è¡¨ç¤ºã•ã‚Œãªã„
  âœ“ ç¢ºèªãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«confirmã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã‚‹
  âœ“ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«cancelã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã‚‹
  âœ“ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã§ã¯æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
  âœ“ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹

âœ“ src/components/__tests__/ToastNotification.spec.ts (8)
  âœ“ æˆåŠŸã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
  âœ“ ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
  âœ“ è­¦å‘Šã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
  âœ“ æƒ…å ±ã‚¿ã‚¤ãƒ—ã§æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
  âœ“ é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«closeã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã‚‹
  âœ“ show=falseã®æ™‚ã¯è¡¨ç¤ºã•ã‚Œãªã„
  âœ“ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒæ­£ã—ãè¨­å®šã•ã‚Œã‚‹
  âœ“ descriptionãŒç©ºã®å ´åˆã¯è¡¨ç¤ºã•ã‚Œãªã„

Test Files  2 passed (2)
Tests       14 passed (14)
Start at    10:30:25
Duration    1.23s (transform 45ms, setup 12ms, collect 234ms, tests 156ms, environment 0ms, prepare 89ms)
```

### **å¤±æ•—æ™‚ã®å‡ºåŠ›ä¾‹**
```
âš  src/components/__tests__/ConfirmDialog.spec.ts (1)
  Ã— æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
    AssertionError: expected 'ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«' to be 'ãƒ†ã‚¹ãƒˆç¢ºèª'
    â¯ src/components/__tests__/ConfirmDialog.spec.ts:20:50
      18|     })
      19|
      20|     expect(wrapper.find('h3').text()).toBe('ãƒ†ã‚¹ãƒˆç¢ºèª')
        |                                      ^
      21|     expect(wrapper.text()).toContain('ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™')
```

## ğŸ“ˆ ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ

### **ã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª**
```bash
npm run test:coverage
```

### **ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã®ä¾‹**
```
 % Coverage report from c8
--------------------------------------|---------|----------|---------|---------|-------------------
File                                  | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s
--------------------------------------|---------|----------|---------|---------|-------------------
All files                             |   95.65 |    88.89 |     100 |   95.65 |
 src/components                        |   95.65 |    88.89 |     100 |   95.65 |
  ConfirmDialog.vue                    |     100 |      100 |     100 |     100 |
  ToastNotification.vue                |   91.30 |    77.78 |     100 |   91.30 | 45,67
--------------------------------------|---------|----------|---------|---------|-------------------
```

## ğŸ”§ ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•**

#### **1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼**
```bash
Error: Cannot resolve dependency
```
**è§£æ±ºæ–¹æ³•:**
```bash
rm -rf node_modules package-lock.json
npm install
```

#### **2. TypeScriptã‚¨ãƒ©ãƒ¼**
```bash
TS2307: Cannot find module '@/components/ConfirmDialog.vue'
```
**è§£æ±ºæ–¹æ³•:** `vitest.config.ts`ã®aliasãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### **3. DOMè¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
```bash
Cannot find element with selector 'button'
```
**è§£æ±ºæ–¹æ³•:** ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ­£ã—ããƒã‚¦ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹ã€ã‚»ãƒ¬ã‚¯ã‚¿ãŒæ­£ã—ã„ã‹ç¢ºèª

### **ãƒ‡ãƒãƒƒã‚°æ–¹æ³•**

```typescript
it('ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ', () => {
  const wrapper = mount(ConfirmDialog, { props: defaultProps })
  
  // HTMLã‚’å‡ºåŠ›ã—ã¦ãƒ‡ãƒãƒƒã‚°
  console.log(wrapper.html())
  
  // è¦‹ã¤ã‹ã£ãŸè¦ç´ ã‚’ç¢ºèª
  console.log(wrapper.findAll('button').length)
})
```

## ğŸš€ æ–°ã—ã„ãƒ†ã‚¹ãƒˆã®è¿½åŠ 

### **1. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**
```bash
# ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
touch src/components/__tests__/NewComponent.spec.ts

# ãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ
touch src/pages/__tests__/NewPage.spec.ts
```

### **2. ãƒ†ã‚¹ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**
```typescript
import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import NewComponent from '../NewComponent.vue'

describe('NewComponent', () => {
  it('æ­£ã—ããƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹', () => {
    const wrapper = mount(NewComponent, {
      props: {
        // å¿…è¦ãªpropsã‚’è¨­å®š
      }
    })

    expect(wrapper.text()).toContain('æœŸå¾…ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ')
  })
})
```

## ğŸ¯ ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### **1. AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä½¿ç”¨**
```typescript
it('ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã«æ­£ã—ãå‹•ä½œã™ã‚‹', async () => {
  // Arrangeï¼ˆæº–å‚™ï¼‰
  const wrapper = mount(Component, { props: testProps })
  
  // Actï¼ˆå®Ÿè¡Œï¼‰
  await wrapper.find('button').trigger('click')
  
  // Assertï¼ˆæ¤œè¨¼ï¼‰
  expect(wrapper.emitted('click')).toBeTruthy()
})
```

### **2. ã‚ã‹ã‚Šã‚„ã™ã„ãƒ†ã‚¹ãƒˆå**
- âŒ `it('works', () => { ... })`
- âœ… `it('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‹ã', () => { ... })`

### **3. 1ãƒ†ã‚¹ãƒˆ1æ¤œè¨¼**
```typescript
// âŒ è¤‡æ•°ã®æ¤œè¨¼ã‚’1ã¤ã®ãƒ†ã‚¹ãƒˆã«å«ã‚ã‚‹
it('ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ­£ã—ãå‹•ä½œã™ã‚‹', () => {
  expect(wrapper.find('h1').exists()).toBe(true)
  expect(wrapper.find('button').exists()).toBe(true)
  expect(wrapper.props().title).toBe('ãƒ†ã‚¹ãƒˆ')
})

// âœ… æ¤œè¨¼é …ç›®ã”ã¨ã«ãƒ†ã‚¹ãƒˆã‚’åˆ†ã‘ã‚‹
it('ã‚¿ã‚¤ãƒˆãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
  expect(wrapper.find('h1').exists()).toBe(true)
})

it('ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
  expect(wrapper.find('button').exists()).toBe(true)
})
```

### **4. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆ**
- ç©ºã®å€¤
- æœ€å¤§å€¤ãƒ»æœ€å°å€¤
- null/undefined
- ç„¡åŠ¹ãªå€¤

## ğŸ“ ç¶™ç¶šçš„ãƒ†ã‚¹ãƒˆ

### **1. ãƒ—ãƒªã‚³ãƒŸãƒƒãƒˆãƒ•ãƒƒã‚¯**
```json
// package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "npm run test:run"
    }
  }
}
```

### **2. CI/CDçµ±åˆ**
```yaml
# .github/workflows/test.yml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run test:run
      - run: npm run test:coverage
```

## ğŸ‰ ã¾ã¨ã‚

ã“ã®ãƒ†ã‚¹ãƒˆç’°å¢ƒã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ãƒ¡ãƒªãƒƒãƒˆãŒå¾—ã‚‰ã‚Œã¾ã™ï¼š

âœ… **å“è³ªä¿è¨¼**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹•ä½œã‚’è‡ªå‹•çš„ã«æ¤œè¨¼
âœ… **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®‰å…¨æ€§**: å¤‰æ›´æ™‚ã®å½±éŸ¿ã‚’æ—©æœŸç™ºè¦‹
âœ… **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: ãƒ†ã‚¹ãƒˆãŒä»•æ§˜æ›¸ã¨ã—ã¦æ©Ÿèƒ½
âœ… **é–‹ç™ºåŠ¹ç‡**: ãƒã‚°ã®æ—©æœŸç™ºè¦‹ã¨ä¿®æ­£
âœ… **ãƒãƒ¼ãƒ é–‹ç™º**: ä¸€è²«ã—ãŸå“è³ªåŸºæº–

ç¶™ç¶šçš„ã«ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã€é«˜å“è³ªãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç¶­æŒã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼
